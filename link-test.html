<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é“¾æ¥å¤„ç†åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .test-content {
            border: 2px dashed #007acc;
            padding: 20px;
            margin: 15px 0;
            background-color: #f8f9fa;
            user-select: text;
            cursor: text;
        }
        
        .test-content a {
            color: #1890ff;
            text-decoration: underline;
        }
        
        .test-content a:hover {
            color: #40a9ff;
        }
        
        .info-panel {
            background: #e8f4fd;
            border-left: 4px solid #007acc;
            padding: 15px;
            margin: 15px 0;
        }
        
        .config-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .config-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .btn-primary {
            background: #007acc;
            color: white;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .analysis-result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        
        .demo-red-text {
            color: #ff4d4f;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”— é“¾æ¥å¤„ç†åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="info-panel">
            <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong><br>
            è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•é“¾æ¥å¤„ç†åŠŸèƒ½ã€‚å½“ä½ å¤åˆ¶ä¸‹é¢çš„æµ‹è¯•å†…å®¹æ—¶ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨ï¼š
            <ul>
                <li>ğŸ”— ç§»é™¤æ‰€æœ‰è¶…é“¾æ¥æ ‡ç­¾</li>
                <li>ğŸ¨ å°†é“¾æ¥æ–‡å­—è½¬æ¢ä¸ºçº¢è‰²æ–‡å­—</li>
                <li>ğŸ’ª ä¿æŒæ–‡å­—çš„ç²—ä½“æ ·å¼</li>
                <li>âœ¨ ä¿ç•™åŸæœ‰çš„æ–‡æœ¬æ ¼å¼</li>
            </ul>
        </div>
        
        <div class="config-buttons">
            <button class="btn-primary" onclick="openConfig()">âš™ï¸ æ‰“å¼€é…ç½®ç•Œé¢</button>
            <button class="btn-secondary" onclick="testFunction()">ğŸ§ª æµ‹è¯•åŠŸèƒ½</button>
            <button class="btn-success" onclick="analyzeClipboard()">ğŸ“‹ åˆ†æå‰ªè´´æ¿</button>
            <button class="btn-warning" onclick="testLinkProcessing()">ğŸ”— ä¸“é¡¹æµ‹è¯•é“¾æ¥å¤„ç†</button>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“ æµ‹è¯•å†…å®¹1ï¼šåŸºç¡€é“¾æ¥å¤„ç†ï¼ˆé€‰æ‹©å¹¶å¤åˆ¶ï¼‰</h2>
        
        <div class="test-content" id="testContent1">
            <p>è¿™æ˜¯ä¸€æ®µåŒ…å«é“¾æ¥çš„æ–‡å­—ï¼šè¯·å‚è€ƒ<a href="https://example.com/guide">ç”¨æˆ·æŒ‡å—</a>äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚</p>
            
            <p>ä½ å¯ä»¥è®¿é—®<a href="https://docs.example.com">å®˜æ–¹æ–‡æ¡£</a>è·å–æ›´å¤šå¸®åŠ©ï¼Œæˆ–è€…æŸ¥çœ‹<a href="mailto:support@example.com">è”ç³»æˆ‘ä»¬</a>é¡µé¢ã€‚</p>
            
            <span>å‚è€ƒ<a href="zh-cn_topic_0000002102227448.html">å¼€å‘ç¯å¢ƒå…ƒæ•°æ®å¯¼å‡º</a>ç« èŠ‚åŠŸèƒ½å°†å…ƒæ•°æ®å¯¼å‡ºæˆzipåŒ…ã€‚</span>
            
            <p>æ›´å¤šç¤ºä¾‹ï¼š<a href="/api/docs" style="font-weight: bold;">APIæ–‡æ¡£</a>ã€<a href="/tutorial">å…¥é—¨æ•™ç¨‹</a>å’Œ<a href="/faq">å¸¸è§é—®é¢˜</a>ã€‚</p>
        </div>
        
        <div class="info-panel">
            <strong>é¢„æœŸç»“æœï¼š</strong><br>
            å¤åˆ¶åï¼Œæ‰€æœ‰çš„é“¾æ¥æ–‡å­—åº”è¯¥å˜æˆ <span class="demo-red-text">çº¢è‰²ç²—ä½“æ–‡å­—</span>ï¼Œä¸å†æ˜¯é“¾æ¥ã€‚
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“ æµ‹è¯•å†…å®¹2ï¼šå¤æ‚æ··åˆå†…å®¹ï¼ˆé€‰æ‹©å¹¶å¤åˆ¶ï¼‰</h2>
        
        <div class="test-content" id="testContent2">
            <h2>æŠ€æœ¯æ–‡æ¡£ç¤ºä¾‹</h2>
            
            <p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²é˜…è¯»<a href="/getting-started">å¿«é€Ÿå¼€å§‹æŒ‡å—</a>ã€‚</p>
            
            <h3>é…ç½®æ­¥éª¤</h3>
            <ol>
                <li>ä¸‹è½½<a href="/downloads/config.zip">é…ç½®æ–‡ä»¶åŒ…</a></li>
                <li>å‚è€ƒ<a href="/docs/configuration">é…ç½®æ–‡æ¡£</a>è¿›è¡Œè®¾ç½®</li>
                <li>è¿è¡Œ<a href="/docs/commands#test">æµ‹è¯•å‘½ä»¤</a>éªŒè¯é…ç½®</li>
            </ol>
            
            <blockquote>
                <p>æ³¨æ„ï¼šå¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹<a href="/troubleshooting">æ•…éšœæ’é™¤æŒ‡å—</a>æˆ–<a href="mailto:tech-support@example.com">è”ç³»æŠ€æœ¯æ”¯æŒ</a>ã€‚</p>
            </blockquote>
            
            <p>æ›´å¤šä¿¡æ¯å¯å‚è€ƒï¼š</p>
            <ul>
                <li><a href="/advanced-guide">é«˜çº§ä½¿ç”¨æŒ‡å—</a></li>
                <li><a href="/api-reference">APIå‚è€ƒæ‰‹å†Œ</a></li>
                <li><a href="/best-practices">æœ€ä½³å®è·µ</a></li>
            </ul>
            
            <img src="https://via.placeholder.com/100x60/4ecdc4/ffffff?text=ç¤ºä¾‹å›¾" alt="ç¤ºä¾‹å›¾ç‰‡" style="float: right; margin: 0 0 10px 10px;">
            
            <p>å¦‚éœ€è¿›ä¸€æ­¥äº†è§£äº§å“ç‰¹æ€§ï¼Œè¯·è®¿é—®<a href="/features">åŠŸèƒ½ä»‹ç»é¡µé¢</a>ã€‚</p>
        </div>
        
        <div class="info-panel">
            <strong>é¢„æœŸç»“æœï¼š</strong><br>
            â€¢ ä¿æŒæ‰€æœ‰æ ‡é¢˜ã€åˆ—è¡¨ã€å¼•ç”¨å—çš„æ ¼å¼<br>
            â€¢ æ‰€æœ‰é“¾æ¥æ–‡å­—å˜æˆçº¢è‰²ç²—ä½“<br>
            â€¢ å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º<br>
            â€¢ æ–‡æ¡£ç»“æ„å®Œæ•´ä¿ç•™
        </div>
    </div>

    <div class="test-container">
        <h2>âš™ï¸ é…ç½®æµ‹è¯•</h2>
        
        <div class="info-panel">
            <strong>é…ç½®é€‰é¡¹è¯´æ˜ï¼š</strong>
            <ul>
                <li><strong>å¯ç”¨é“¾æ¥å¤„ç†ï¼š</strong> æ€»å¼€å…³ï¼Œæ§åˆ¶æ˜¯å¦å¤„ç†é“¾æ¥</li>
                <li><strong>ç§»é™¤é“¾æ¥ï¼š</strong> ç§»é™¤ &lt;a&gt; æ ‡ç­¾ï¼Œä¿ç•™æ–‡å­—å†…å®¹</li>
                <li><strong>è½¬æ¢ä¸ºçº¢è‰²æ–‡å­—ï¼š</strong> å°†é“¾æ¥æ–‡å­—è®¾ç½®ä¸ºçº¢è‰²å¹¶åŠ ç²—</li>
                <li><strong>çº¢è‰²å€¼ï¼š</strong> è‡ªå®šä¹‰çº¢è‰²çš„é¢œè‰²å€¼ï¼ˆé»˜è®¤ #ff4d4fï¼‰</li>
            </ul>
        </div>
        
        <div class="config-buttons">
            <button class="btn-primary" onclick="enableAllLinkProcessing()">âœ… å¯ç”¨å…¨éƒ¨å¤„ç†</button>
            <button class="btn-secondary" onclick="disableAllLinkProcessing()">âŒ ç¦ç”¨å…¨éƒ¨å¤„ç†</button>
            <button class="btn-warning" onclick="setCustomRedColor()">ğŸ¨ è®¾ç½®è‡ªå®šä¹‰çº¢è‰²</button>
            <button class="btn-success" onclick="showCurrentConfig()">ğŸ“Š æ˜¾ç¤ºå½“å‰é…ç½®</button>
        </div>
        
        <div id="configDisplay" class="analysis-result" style="display: none;"></div>
    </div>

    <div class="test-container">
        <h2>ğŸ“Š å‰ªè´´æ¿åˆ†æ</h2>
        
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¥åˆ†æå‰ªè´´æ¿å†…å®¹ä¸­çš„é“¾æ¥å¤„ç†æ•ˆæœï¼š</p>
        
        <div class="config-buttons">
            <button class="btn-success" onclick="analyzeClipboard()">ğŸ” åˆ†æå‰ªè´´æ¿å†…å®¹</button>
            <button class="btn-secondary" onclick="clearAnalysis()">ğŸ—‘ï¸ æ¸…é™¤åˆ†æç»“æœ</button>
        </div>
        
        <div id="clipboardAnalysis" class="analysis-result" style="display: none;"></div>
    </div>

    <script>
        // æ‰“å¼€é…ç½®ç•Œé¢
        function openConfig() {
            if (typeof imageInlinerConfig !== 'undefined') {
                imageInlinerConfig.show();
            } else {
                alert('è¯·å…ˆåŠ è½½æ’ä»¶å†…å®¹è„šæœ¬');
            }
        }

        // æµ‹è¯•åŠŸèƒ½
        function testFunction() {
            if (typeof testImageInliner !== 'undefined') {
                testImageInliner();
            } else {
                alert('è¯·å…ˆåŠ è½½æ’ä»¶å†…å®¹è„šæœ¬');
                console.log('è¯·ç¡®ä¿æ’ä»¶å·²åŠ è½½ï¼Œç„¶ååœ¨æ§åˆ¶å°è¿è¡Œ testImageInliner()');
            }
        }

        // ä¸“é¡¹æµ‹è¯•é“¾æ¥å¤„ç†
        function testLinkProcessing() {
            if (typeof imageInlinerConfig !== 'undefined') {
                // ç¡®ä¿é“¾æ¥å¤„ç†åŠŸèƒ½å¯ç”¨
                imageInlinerConfig.setLinkProcessingConfig({
                    enabled: true,
                    removeLinks: true,
                    convertToRedText: true,
                    redColor: '#ff4d4f'
                });
                
                console.log('âœ… å·²å¯ç”¨é“¾æ¥å¤„ç†åŠŸèƒ½');
                alert('å·²å¯ç”¨é“¾æ¥å¤„ç†åŠŸèƒ½\nè¯·å¤åˆ¶åŒ…å«é“¾æ¥çš„æµ‹è¯•å†…å®¹\né“¾æ¥æ–‡å­—å°†è½¬æ¢ä¸ºçº¢è‰²æ–‡å­—');
                showCurrentConfig();
            } else {
                alert('è¯·å…ˆåŠ è½½æ’ä»¶å†…å®¹è„šæœ¬');
            }
        }

        // å¯ç”¨å…¨éƒ¨é“¾æ¥å¤„ç†åŠŸèƒ½
        function enableAllLinkProcessing() {
            if (typeof imageInlinerConfig !== 'undefined') {
                imageInlinerConfig.setLinkProcessingConfig({
                    enabled: true,
                    removeLinks: true,
                    convertToRedText: true,
                    redColor: '#ff4d4f'
                });
                console.log('âœ… å·²å¯ç”¨å…¨éƒ¨é“¾æ¥å¤„ç†åŠŸèƒ½');
                alert('å·²å¯ç”¨å…¨éƒ¨é“¾æ¥å¤„ç†åŠŸèƒ½');
            } else {
                alert('è¯·å…ˆåŠ è½½æ’ä»¶å†…å®¹è„šæœ¬');
            }
        }

        // ç¦ç”¨å…¨éƒ¨é“¾æ¥å¤„ç†åŠŸèƒ½
        function disableAllLinkProcessing() {
            if (typeof imageInlinerConfig !== 'undefined') {
                imageInlinerConfig.setLinkProcessingConfig({
                    enabled: false
                });
                console.log('âŒ å·²ç¦ç”¨é“¾æ¥å¤„ç†åŠŸèƒ½');
                alert('å·²ç¦ç”¨é“¾æ¥å¤„ç†åŠŸèƒ½');
            } else {
                alert('è¯·å…ˆåŠ è½½æ’ä»¶å†…å®¹è„šæœ¬');
            }
        }

        // è®¾ç½®è‡ªå®šä¹‰çº¢è‰²
        function setCustomRedColor() {
            const color = prompt('è¯·è¾“å…¥è‡ªå®šä¹‰çº¢è‰²å€¼ï¼ˆå¦‚ #ff0000 æˆ– #dc3545ï¼‰:', '#ff4d4f');
            if (color && typeof imageInlinerConfig !== 'undefined') {
                if (/^#[0-9A-F]{6}$/i.test(color)) {
                    imageInlinerConfig.setLinkProcessingConfig({
                        redColor: color
                    });
                    alert(`å·²è®¾ç½®è‡ªå®šä¹‰çº¢è‰²: ${color}`);
                    showCurrentConfig();
                } else {
                    alert('é¢œè‰²æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·ä½¿ç”¨ #RRGGBB æ ¼å¼');
                }
            }
        }

        // æ˜¾ç¤ºå½“å‰é…ç½®
        function showCurrentConfig() {
            if (typeof imageInlinerConfig !== 'undefined') {
                const headingConfig = imageInlinerConfig.getHeadingConfig();
                const emptyLineConfig = imageInlinerConfig.getEmptyLineConfig();
                const linkConfig = imageInlinerConfig.getLinkProcessingConfig();
                
                const configText = `å½“å‰é…ç½®çŠ¶æ€ï¼š

ã€æ ‡é¢˜æ›¿æ¢é…ç½®ã€‘
å¯ç”¨çŠ¶æ€: ${headingConfig.enabled ? 'âœ… å·²å¯ç”¨' : 'âŒ æœªå¯ç”¨'}

ã€é“¾æ¥å¤„ç†é…ç½®ã€‘
å¯ç”¨çŠ¶æ€: ${linkConfig.enabled ? 'âœ… å·²å¯ç”¨' : 'âŒ æœªå¯ç”¨'}
ç§»é™¤é“¾æ¥: ${linkConfig.removeLinks ? 'âœ…' : 'âŒ'}
è½¬æ¢ä¸ºçº¢è‰²æ–‡å­—: ${linkConfig.convertToRedText ? 'âœ…' : 'âŒ'}
çº¢è‰²å€¼: ${linkConfig.redColor}

ã€ç©ºè¡Œæ¸…ç†é…ç½®ã€‘
å¯ç”¨çŠ¶æ€: ${emptyLineConfig.enabled ? 'âœ… å·²å¯ç”¨' : 'âŒ æœªå¯ç”¨'}
ç§»é™¤ç©ºæ®µè½: ${emptyLineConfig.removeEmptyParagraphs ? 'âœ…' : 'âŒ'}
ç§»é™¤ç©ºdiv: ${emptyLineConfig.removeEmptyDivs ? 'âœ…' : 'âŒ'}
ç§»é™¤å¤šä½™æ¢è¡Œ: ${emptyLineConfig.removeExcessiveLineBreaks ? 'âœ…' : 'âŒ'}
ç´§å‡‘é—´è·: ${emptyLineConfig.compactSpacing ? 'âœ…' : 'âŒ'}`;

                document.getElementById('configDisplay').style.display = 'block';
                document.getElementById('configDisplay').textContent = configText;
                
                console.log('ğŸ“Š å½“å‰é…ç½®:', { headingConfig, emptyLineConfig, linkConfig });
            } else {
                alert('è¯·å…ˆåŠ è½½æ’ä»¶å†…å®¹è„šæœ¬');
            }
        }

        // åˆ†æå‰ªè´´æ¿å†…å®¹
        async function analyzeClipboard() {
            try {
                const clipboardText = await navigator.clipboard.readText();
                
                // å°è¯•è¯»å–HTMLå†…å®¹
                let clipboardHTML = '';
                try {
                    const clipboardItems = await navigator.clipboard.read();
                    for (const item of clipboardItems) {
                        if (item.types.includes('text/html')) {
                            const htmlBlob = await item.getType('text/html');
                            clipboardHTML = await htmlBlob.text();
                        }
                    }
                } catch (e) {
                    console.log('æ— æ³•è¯»å–HTMLæ ¼å¼çš„å‰ªè´´æ¿å†…å®¹');
                }

                // åˆ†æé“¾æ¥
                const linkCount = clipboardHTML ? (clipboardHTML.match(/<a[^>]*>/gi) || []).length : 0;
                const redTextCount = clipboardHTML ? (clipboardHTML.match(/color:\s*#ff4d4f/gi) || []).length : 0;
                
                const analysis = `å‰ªè´´æ¿å†…å®¹åˆ†æï¼š

ã€æ–‡æœ¬å†…å®¹ã€‘
é•¿åº¦: ${clipboardText.length} å­—ç¬¦
è¡Œæ•°: ${clipboardText.split('\n').length} è¡Œ

ã€HTMLå†…å®¹ã€‘
${clipboardHTML ? `é•¿åº¦: ${clipboardHTML.length} å­—ç¬¦
åŒ…å«å›¾ç‰‡: ${clipboardHTML.includes('<img') ? 'âœ…' : 'âŒ'}
åŒ…å«è¡¨æ ¼: ${clipboardHTML.includes('<table') ? 'âœ…' : 'âŒ'}
åŒ…å«æ ‡é¢˜: ${(/h[1-6]/i.test(clipboardHTML)) ? 'âœ…' : 'âŒ'}
åŒ…å«é“¾æ¥: ${linkCount} ä¸ª
åŒ…å«çº¢è‰²æ–‡å­—: ${redTextCount} ä¸ª` : 'æ— HTMLå†…å®¹'}

ã€é“¾æ¥å¤„ç†æ•ˆæœã€‘
${linkCount === 0 && redTextCount > 0 ? 'âœ… é“¾æ¥å·²æˆåŠŸè½¬æ¢ä¸ºçº¢è‰²æ–‡å­—' : 
  linkCount > 0 ? 'âš ï¸ ä»æœ‰é“¾æ¥æœªå¤„ç†' : 
  'ğŸ“ æœªæ£€æµ‹åˆ°é“¾æ¥å†…å®¹'}

ã€æ–‡æœ¬å†…å®¹é¢„è§ˆã€‘
${clipboardText.substring(0, 500)}${clipboardText.length > 500 ? '...' : ''}

${clipboardHTML ? `ã€HTMLå†…å®¹é¢„è§ˆã€‘
${clipboardHTML.substring(0, 500)}${clipboardHTML.length > 500 ? '...' : ''}` : ''}`;

                document.getElementById('clipboardAnalysis').style.display = 'block';
                document.getElementById('clipboardAnalysis').textContent = analysis;
                
                console.log('ğŸ“‹ å‰ªè´´æ¿åˆ†æå®Œæˆ');
            } catch (err) {
                alert('æ— æ³•è®¿é—®å‰ªè´´æ¿: ' + err.message);
                console.error('å‰ªè´´æ¿è®¿é—®å¤±è´¥:', err);
            }
        }

        // æ¸…é™¤åˆ†æç»“æœ
        function clearAnalysis() {
            document.getElementById('clipboardAnalysis').style.display = 'none';
            document.getElementById('configDisplay').style.display = 'none';
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('ğŸ”— é“¾æ¥å¤„ç†æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š');
            console.log('1. é€‰æ‹©åŒ…å«é“¾æ¥çš„æµ‹è¯•å†…å®¹å¹¶å¤åˆ¶');
            console.log('2. æŸ¥çœ‹æ§åˆ¶å°çš„é“¾æ¥å¤„ç†æ—¥å¿—');
            console.log('3. ä½¿ç”¨é…ç½®æŒ‰é’®æµ‹è¯•ä¸åŒè®¾ç½®');
            console.log('4. åˆ†æå‰ªè´´æ¿æŸ¥çœ‹å¤„ç†æ•ˆæœ');
        });
    </script>
</body>
</html>
